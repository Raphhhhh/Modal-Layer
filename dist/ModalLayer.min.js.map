{"version":3,"file":"ModalLayer.min.js","sources":["../ModalLayer.js"],"sourcesContent":["export class TokyChannelWidgetPopup {\r\n  constructor(options = {}) {\r\n    this.contentStyle = '';\r\n    this.contentHTML = '';\r\n    this.height = options.height || '365px';\r\n    this.width = options.width || '600px';\r\n    this.closeButtonContent = options.closeButtonContent || 'X';\r\n    this.customCss = options.customCss || '';\r\n\r\n    this.modalId = `TokyChannelWidgetPopupId-${Date.now()}`;\r\n    \r\n    this.defineStyles();\r\n    this.createModal();\r\n    this.injectStyles();\r\n    this.injectModalElements();\r\n  }\r\n\r\n  defineStyles() {\r\n    this.modalStyle = `.TokyChannelWidgetPopup-modal { height: ${this.height}; width: ${this.width}; background-color: #fff; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); padding: 0px; opacity: 0; pointer-events: none; transition: all 300ms ease-in-out; z-index: 1011; }`;\r\n    this.modalStyleVisible = '.TokyChannelWidgetPopup-modal-visible { opacity: 1; pointer-events: auto; }';\r\n    this.modalStyleClose = '.TokyChannelWidgetPopup-modal-closeBtn { position: absolute; font-size: 1.2rem; right: -20px; top: -20px; cursor: pointer;  font-size:bold; border-radius:50%; color: white; }';\r\n    if(this.width === '100%' || this.height === '100%'){\r\n      this.modalStyleClose += '.TokyChannelWidgetPopup-modal-closeBtn {right: 5px; top: 5px; color: black;}';\r\n    }\r\n    this.blackedout = '.TokyChannelWidgetPopup-blackedout { position: absolute; z-index: 1010; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.65); display: none; }';\r\n    this.blackedoutVisible = `.TokyChannelWidgetPopup-blackedout-visible { display: block; height:100% }`;\r\n  }\r\n\r\n  createModal() {\r\n    this.modalHTML = document.createElement('div');\r\n    this.modalHTML.id = this.modalId;\r\n    this.modalHTML.dataset.popupModal = 'one';\r\n    this.modalHTML.classList.add('TokyChannelWidgetPopup-modal');\r\n    this.modalHTML.classList.add('TokyChannelWidgetPopup-shadow');\r\n    this.bodyBlackedout = document.createElement('div');\r\n    this.bodyBlackedout.classList.add('TokyChannelWidgetPopup-blackedout');\r\n  }\r\n\r\n  injectStyles() {\r\n    this.defineStyles();\r\n    let style = document.getElementById('TokyChannelWidgetPopupStyles');\r\n    if (!style) {\r\n      style = document.createElement('style');\r\n      style.setAttribute('id', 'TokyChannelWidgetPopupStyles');\r\n      style.setAttribute('type', 'text/css');\r\n      style.innerHTML = this.modalStyle + this.modalStyleVisible + this.blackedout + this.blackedoutVisible;\r\n      document.getElementsByTagName('head')[0].appendChild(style);\r\n    }\r\n  }\r\n\r\n  injectModalElements() {\r\n    document.body.appendChild(this.bodyBlackedout);\r\n    document.body.appendChild(this.modalHTML);\r\n    this.modalHTML.attachShadow({mode: 'open'});\r\n  }\r\n\r\n  injectModalContent() {\r\n    this.bodyBlackedout.style.height = document.documentElement.clientHeight;\r\n    this.modalHTML.style.top = `calc(${window.scrollY}px + 50%)`;\r\n    this.modalHTML.shadowRoot.innerHTML = `\r\n      <style>\r\n        ${this.modalStyleClose}\r\n        ${this.contentStyle}\r\n        ${this.customCss}\r\n      </style>\r\n      <span class=\"TokyChannelWidgetPopup-modal-closeBtn\">${this.closeButtonContent}</span>\r\n      <div id=\"TokyChannelWidgetPopup-modal-content\" style=\"width:100%;height:100%;\">${this.contentHTML}</div>\r\n    `;\r\n  }\r\n\r\n  getElementById(id) {\r\n    return this.modalHTML.shadowRoot.getElementById(id);\r\n  }\r\n\r\n  hideModal() {\r\n    this.modalHTML.classList.remove('TokyChannelWidgetPopup-modal-visible');\r\n    this.bodyBlackedout.classList.remove('TokyChannelWidgetPopup-blackedout-visible');\r\n    document.querySelector('.TokyChannelWidgetPopup-blackedout').removeEventListener('click', this.hideModal);\r\n    this.modalHTML.shadowRoot.querySelector('.TokyChannelWidgetPopup-modal-closeBtn').removeEventListener('click', this.hideModal);\r\n  }\r\n\r\n  openModal() {\r\n    this.modalHTML.classList.add('TokyChannelWidgetPopup-modal-visible');\r\n    this.bodyBlackedout.classList.add('TokyChannelWidgetPopup-blackedout-visible');\r\n    this.injectModalContent();\r\n    this.modalHTML.shadowRoot.querySelector('.TokyChannelWidgetPopup-modal-closeBtn').addEventListener('click', this.hideModal.bind(this));\r\n    document.querySelector('.TokyChannelWidgetPopup-blackedout').addEventListener('click', this.hideModal.bind(this));\r\n  }\r\n}"],"names":["constructor","options","contentStyle","contentHTML","height","width","closeButtonContent","customCss","modalId","Date","now","defineStyles","createModal","injectStyles","injectModalElements","modalStyle","this","modalStyleVisible","modalStyleClose","blackedout","blackedoutVisible","modalHTML","document","createElement","id","dataset","popupModal","classList","add","bodyBlackedout","style","getElementById","setAttribute","innerHTML","getElementsByTagName","appendChild","body","attachShadow","mode","injectModalContent","documentElement","clientHeight","top","window","scrollY","shadowRoot","hideModal","remove","querySelector","removeEventListener","openModal","addEventListener","bind"],"mappings":"oFAAO,MACLA,YAAYC,EAAU,SACfC,aAAe,QACfC,YAAc,QACdC,OAASH,EAAQG,QAAU,aAC3BC,MAAQJ,EAAQI,OAAS,aACzBC,mBAAqBL,EAAQK,oBAAsB,SACnDC,UAAYN,EAAQM,WAAa,QAEjCC,QAAW,4BAA2BC,KAAKC,WAE3CC,oBACAC,mBACAC,oBACAC,sBAGPH,oBACOI,WAAc,2CAA0CC,KAAKZ,kBAAkBY,KAAKX,qNACpFY,kBAAoB,mFACpBC,gBAAkB,iLACL,SAAfF,KAAKX,OAAoC,SAAhBW,KAAKZ,cAC1Bc,iBAAmB,qFAErBC,WAAa,mLACbC,kBAAqB,6EAG5BR,mBACOS,UAAYC,SAASC,cAAc,YACnCF,UAAUG,GAAKR,KAAKR,aACpBa,UAAUI,QAAQC,WAAa,WAC/BL,UAAUM,UAAUC,IAAI,qCACxBP,UAAUM,UAAUC,IAAI,sCACxBC,eAAiBP,SAASC,cAAc,YACxCM,eAAeF,UAAUC,IAAI,qCAGpCf,oBACOF,mBACDmB,EAAQR,SAASS,eAAe,gCAC/BD,IACHA,EAAQR,SAASC,cAAc,SAC/BO,EAAME,aAAa,KAAM,gCACzBF,EAAME,aAAa,OAAQ,YAC3BF,EAAMG,UAAYjB,KAAKD,WAAaC,KAAKC,kBAAoBD,KAAKG,WAAaH,KAAKI,kBACpFE,SAASY,qBAAqB,QAAQ,GAAGC,YAAYL,IAIzDhB,sBACEQ,SAASc,KAAKD,YAAYnB,KAAKa,gBAC/BP,SAASc,KAAKD,YAAYnB,KAAKK,gBAC1BA,UAAUgB,aAAa,CAACC,KAAM,SAGrCC,0BACOV,eAAeC,MAAM1B,OAASkB,SAASkB,gBAAgBC,kBACvDpB,UAAUS,MAAMY,IAAO,QAAOC,OAAOC,wBACrCvB,UAAUwB,WAAWZ,UAAa,4BAEjCjB,KAAKE,4BACLF,KAAKd,yBACLc,KAAKT,wFAE6CS,KAAKV,mHACsBU,KAAKb,0BAI1F4B,eAAeP,UACNR,KAAKK,UAAUwB,WAAWd,eAAeP,GAGlDsB,iBACOzB,UAAUM,UAAUoB,OAAO,6CAC3BlB,eAAeF,UAAUoB,OAAO,6CACrCzB,SAAS0B,cAAc,sCAAsCC,oBAAoB,QAASjC,KAAK8B,gBAC1FzB,UAAUwB,WAAWG,cAAc,0CAA0CC,oBAAoB,QAASjC,KAAK8B,WAGtHI,iBACO7B,UAAUM,UAAUC,IAAI,6CACxBC,eAAeF,UAAUC,IAAI,kDAC7BW,0BACAlB,UAAUwB,WAAWG,cAAc,0CAA0CG,iBAAiB,QAASnC,KAAK8B,UAAUM,KAAKpC,OAChIM,SAAS0B,cAAc,sCAAsCG,iBAAiB,QAASnC,KAAK8B,UAAUM,KAAKpC"}